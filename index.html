<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body { 
    background-color: #000 !important; 
    overflow: hidden !important; height: 100vh !important; width: 100vw !important;
  }
  #superContainer {
    position: fixed !important; top: 0; left: 0;
    width: 100vw !important; height: 100vh !important;
    display: flex !important; flex-direction: column !important;
    background: #000 !important;
  }
  /* 1. IMAGE BOX (45vh) */
  #top {
    height: 45vh !important; width: 100% !important;
    display: flex !important; justify-content: center !important; align-items: center !important;
    border-bottom: 3px solid #444 !important;
  }
  #top img { height: 95% !important; width: auto !important; object-fit: contain; }

  /* 2. NERD BOX (35vh) - LARGE TEXT & FULL CENTERED */
  #mid {
    height: 35vh !important; width: 100% !important;
    background: #111 !important; 
    display: flex !important; flex-direction: column !important;
    justify-content: space-evenly !important; align-items: center !important;
    padding: 15px 5% !important; border-bottom: 3px solid #444 !important;
  }
  .line { color: #ffffff !important; font-family: 'Courier New', monospace; font-size: 20px; font-weight: bold; text-align: center; }
  .stats { 
    color: #ffffff !important; font-family: monospace; font-size: 17px; 
    display: flex !important; justify-content: space-around !important;
    width: 100% !important; border-top: 1px solid #555; padding-top: 10px;
  }
  .highlight { color: #0f0; } /* Resource Green */

  /* 3. BUTTON BAR (20vh) - PUSHED UP DRAMATICALLY */
  #bot {
    height: 20vh !important; width: 100% !important;
    display: flex !important; flex-direction: column !important;
    justify-content: center !important; align-items: center !important;
    padding-bottom: 50px !important; /* Forces buttons up away from tablet edge */
    gap: 15px !important;
  }
  .row { display: flex !important; gap: 30px !important; }
  .btn {
    width: 140px !important; height: 55px !important;
    border: 4px solid #fff !important; border-radius: 12px !important;
    color: #fff !important; font-weight: bold !important; font-size: 16px !important;
    cursor: pointer !important; text-transform: uppercase !important;
  }
</style>
</head>
<body>
<div id="superContainer">
  <div id="top"><img id="ageImg" src="https://user.uploads.dev/file/fe81017f6eaa2d4475633a99025a08db.jpg"></div>
  <div id="mid">
    <div id="news" class="line">PROJECT: EIPENSTIEN MICROCOSM</div>
    <div id="last" class="line">ACTION: [AWAITING]</div>
    <div id="effect" class="line" style="color:#aaa; font-style:italic;">EFFECT: NO DATA YET...</div>
    <div class="stats">
      <span>YEAR: <span id="yVal">-7000</span></span>
      <span>AGE: <span id="aVal">STONE AGE</span></span>
    </div>
    <div class="stats">
      <span>CIV1: <span id="p1">1000</span> | <span id="rL1">FOOD</span>: <span id="r1" class="highlight">100</span>%</span>
    </div>
    <div class="stats">
      <span>CIV2: <span id="p2">1000</span> | <span id="rL2">FOOD</span>: <span id="r2" class="highlight">100</span>%</span>
    </div>
  </div>
  <div id="bot">
    <div class="row">
      <button class="btn" style="background:#900" onclick="act(0)" id="b0"></button>
      <button class="btn" style="background:#900" onclick="act(1)" id="b1"></button>
    </div>
    <div class="row">
      <button class="btn" style="background:#009" onclick="act(2)" id="b2"></button>
      <button class="btn" style="background:#009" onclick="act(3)" id="b3"></button>
    </div>
  </div>
</div>
<script>
  let yr=-7000, age=1, p1=1000, p2=1000, res1=100, res2=100, active=false, paused=false;
  const labels = { 1: "FOOD", 2: "GRAIN", 3: "ENERGY" };
  const data = {
    1: { n: "STONE AGE 1/3", i: "https://user.uploads.dev/file/fe81017f6eaa2d4475633a99025a08db.jpg", p: ["HUNT","GATHER","FIRE","RITUAL","RAID","HIDE","TEACH","EXPLORE","FEAR","ADAPT","REST","OBSERVE","DOMINATE","MERGE","BUILD","SACRIFICE"] },
    2: { n: "MIDDLE AGE 2/3", i: "https://user.uploads.dev/file/58967e7edf54e6791b41986e77e924b7.jpg", p: ["TAX","TEMPLE","PENANCE","COMMAND","DECREE","WORKS","DYNASTY","REFORM"] },
    3: { n: "MODERN AGE 3/3", i: "https://user.uploads.dev/file/f1492929c1178fb413a3697356f0bb20.jpg", p: ["INDUSTRY","DATA","MEDIA","NETWORK","FUSION","STRIKE","PATENT","ROCKET"] }
  };

  const warnings = [
    "EXPANSION NOTED; STABILITY THINS.",
    "GROWTH REGISTERED; UNSEEN DEBT ACCRUES.",
    "RESOURCES STABILIZED; ENTROPY LURKS.",
    "POPULATION SPIKE; THE SEAL WEAKENS.",
    "ORDER RESTORED; SHADOWS LENGTHEN.",
    "ACTION SUCCESSFUL; EQUILIBRIUM SHIFTS."
  ];

  function roll() {
    let pool = data[age].p;
    let picks = [...pool].sort(()=>.5-Math.random()).slice(0,4);
    for(let i=0;i<4;i++) document.getElementById('b'+i).innerText = picks[i];
    return picks;
  }
  let current = roll();

  function act(s) {
    if(paused) return;
    active = true;
    let move = current[s];
    document.getElementById('last').innerText = "ACTION: " + move;
    
    // Lore Trigger
    if(move === "TEACH") document.getElementById('news').innerText = "NEWS: GRONK TEACHES BIRD TO TALK";
    
    // Vague Warning Logic
    let warn = warnings[Math.floor(Math.random() * warnings.length)];
    document.getElementById('effect').innerText = "EFFECT: " + warn;

    if(s < 2) { 
        if(["HUNT","GATHER","WORKS","INDUSTRY"].includes(move)) res1 = Math.min(100, res1 + 35);
        p1 += 150; p2 -= 60; 
    } else { 
        if(["HUNT","GATHER","WORKS","INDUSTRY"].includes(move)) res2 = Math.min(100, res2 + 35);
        p2 += 150; p1 -= 60; 
    }
    current = roll(); update();
  }

  setInterval(() => {
    if(!active || paused) return;
    yr++;
    res1 -= 1.4; res2 -= 1.4; // High Hunger Speed
    
    let p1L = (res1 <= 0) ? 22 : 4; 
    let p2L = (res2 <= 0) ? 22 : 4;
    p1 -= p1L; p2 -= p2L;

    if(p1 <= 0 || p2 <= 0) {
      paused = true;
      document.getElementById('news').innerText = "EXPERIMENT TERMINATED";
      setTimeout(() => location.reload(), 4000);
    }
    if(yr === -3987 && age === 1) { age=2; paused=true; document.getElementById('news').innerText="NEWS: AN AGE ENDS"; setTimeout(()=>paused=false,3000); }
    if(yr === -974 && age === 2) { age=3; paused=true; document.getElementById('news').innerText="NEWS: AN AGE ENDS"; setTimeout(()=>paused=false,3000); }
    update();
  }, 900);

  function update() {
    document.getElementById('yVal').innerText = yr;
    document.getElementById('p1').innerText = Math.max(0, Math.floor(p1));
    document.getElementById('p2').innerText = Math.max(0, Math.floor(p2));
    document.getElementById('r1').innerText = Math.max(0, Math.floor(res1));
    document.getElementById('r2').innerText = Math.max(0, Math.floor(res2));
    document.getElementById('rL1').innerText = labels[age];
    document.getElementById('rL2').innerText = labels[age];
    document.getElementById('aVal').innerText = data[age].n;
    document.getElementById('ageImg').src = data[age].i;
  }
</script>
</body>
</html>
